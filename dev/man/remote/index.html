<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Connecting to a Julia session on a remote machine · Juno Documentation</title><link rel="canonical" href="http://docs.junolab.org/stable/man/remote/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Juno Documentation logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Juno Documentation logo"/></a><div class="docs-package-name"><span class="docs-autofit">Juno Documentation</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../installation/">Installation Instructions</a></li><li><a class="tocitem" href="../basic_usage/">Basic Usage</a></li><li><a class="tocitem" href="../debugging/">Debugging</a></li><li class="is-active"><a class="tocitem" href>Connecting to a Julia session on a remote machine</a><ul class="internal"><li><a class="tocitem" href="#Basic-setup"><span>Basic setup</span></a></li><li><a class="tocitem" href="#Advanced-usages"><span>Advanced usages</span></a></li></ul></li><li><a class="tocitem" href="../juno_frontend/">The Juno.jl Front-End</a></li><li><a class="tocitem" href="../info_developer/">Information for Package Developers</a></li><li><a class="tocitem" href="../update/">Update Instructions</a></li><li><a class="tocitem" href="../faq/">FAQ</a></li></ul></li><li><span class="tocitem">Developer Documentation</span><ul><li><a class="tocitem" href="../../devdocs/contributor_guide/">Contributor Guide</a></li><li><a class="tocitem" href="../../devdocs/dev_install/">Developer Installation Instructions</a></li><li><a class="tocitem" href="../../devdocs/ecosystem/">Ecosystem</a></li><li><a class="tocitem" href="../../devdocs/test_suites/">Test Suites</a></li><li><a class="tocitem" href="../../devdocs/communication/">Communication</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Connecting to a Julia session on a remote machine</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Connecting to a Julia session on a remote machine</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JunoLab/JunoDocs.jl/blob/master/docs/src/man/remote.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Connecting-to-a-Julia-session-on-a-remote-machine"><a class="docs-heading-anchor" href="#Connecting-to-a-Julia-session-on-a-remote-machine">Connecting to a Julia session on a remote machine</a><a id="Connecting-to-a-Julia-session-on-a-remote-machine-1"></a><a class="docs-heading-anchor-permalink" href="#Connecting-to-a-Julia-session-on-a-remote-machine" title="Permalink"></a></h1><p>Juno can be used for editing and executing code on a remote machine (which might be very useful for computationally expensive tasks or when you want to use hardware not available locally, e.g. GPUs).</p><div class="admonition is-info"><header class="admonition-header">Prerequisites</header><div class="admonition-body"><p>The remote machine must have Julia installed and you need to be able to open a ssh connection to it. On your local machine you need a working Juno installation as well as <a href="https://github.com/h3imdall/ftp-remote-edit"><code>ftp-remote-edit</code></a> for editing remote files.</p></div></div><h2 id="Basic-setup"><a class="docs-heading-anchor" href="#Basic-setup">Basic setup</a><a id="Basic-setup-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-setup" title="Permalink"></a></h2><p>Add a new server in <code>ftp-remote-edit</code>&#39;s server browser with the <code>Ftp Remote Edit: Edit Servers</code> command:</p><p><img src="../../assets/remote3.5.png" alt/></p><p>Select that server in the &quot;Remote&quot; tree view and click the planet icon in the toolbar to start a Julia session on the selected remote machine. If you want to start a remote session by default then you can change the <code>Boot Mode</code> to <code>Remote</code> in the julia-client settings.</p><p><img src="../../assets/remote4.png" alt/></p><p>If you have <code>tmux</code> installed on the server then you can also use a persistent session, which you can connect to and disconnect from at will without losing progress. To use this feature enable the <code>Use persistent tmux session</code> option in the julia-client settings. Note that using <code>tmux</code> changes the behavior of the console, affecting scrolling and copy/paste. See <a href="https://man.openbsd.org/OpenBSD-current/man1/tmux.1#DEFAULT_KEY_BINDINGS">the manual page</a> for more information.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>With older <code>tmux</code> versions like 1.8-4 (which is currently the latest in distributions like CentOS) the buffer used when creating a session has a <a href="https://github.com/tmux/tmux/issues/254">2028 character limit</a> and Juno might not be able to start. If this happens you will receive the <code>command too long</code> error in the REPL console.</p><p>You can manually start <code>tmux</code> on the server with</p><pre><code class="language-bash">tmux new -s juno_tmux_session</code></pre><p>then start Julia inside the session and</p><pre><code class="language-julia">using Juno, Atom</code></pre><p>and then detach.</p><p>After this step Juno should be able to connect to the remote session.</p></div></div><h2 id="Advanced-usages"><a class="docs-heading-anchor" href="#Advanced-usages">Advanced usages</a><a id="Advanced-usages-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-usages" title="Permalink"></a></h2><p>If you have a more elaborate setup on the remote server, you can take control of the various stages of launching a remote Julia session.</p><h3 id="Customizing-the-command-to-launch-Julia"><a class="docs-heading-anchor" href="#Customizing-the-command-to-launch-Julia">Customizing the command to launch Julia</a><a id="Customizing-the-command-to-launch-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Customizing-the-command-to-launch-Julia" title="Permalink"></a></h3><p>The command to launch Julia can be replaced with a custom script that finishes with launching Julia. This can be useful if you don&#39;t have Julia installed directly on the server, but inside a container, or if you need some job scheduling script to start Julia. For this task put the path to your custom script as the command to execute Julia on the remote server</p><p><img src="../../assets/remote5.png" alt/></p><p>where <code>julia.sh</code> can be something like</p><pre><code class="language-bash"># do setup
/usr/bin/julia &quot;$@&quot;</code></pre><p>The important part is to use <code>&quot;$@&quot;</code> in order to pass the arguments to Julia required to start Juno and of course to guarantee that at the end of the script a Julia session will be opened. For example, to launch Julia in a singularity container on the remote, something like the following can be used</p><pre><code class="language-bash">export JULIA_NUM_THREADS=&quot;$(( `nproc` / 2 ))&quot;
singularity exec /path/to/singularity/image/julia.sif /usr/local/julia/bin/julia -O 3 &quot;$@&quot;</code></pre><h3 id="Manual-port-forwarding"><a class="docs-heading-anchor" href="#Manual-port-forwarding">Manual port forwarding</a><a id="Manual-port-forwarding-1"></a><a class="docs-heading-anchor-permalink" href="#Manual-port-forwarding" title="Permalink"></a></h3><p>Internally Juno uses a <a href="https://github.com/mscdex/ssh2">ssh nodejs library</a> to establish the connection with the remote server. You can manually connect to the remote server and use port forwarding to connect Juno to the remote session. This can be useful if you need more control over the connection layer.</p><h4 id="Setup"><a class="docs-heading-anchor" href="#Setup">Setup</a><a id="Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Setup" title="Permalink"></a></h4><blockquote><p>On the local machine:</p></blockquote><p>Open a new terminal in Juno with <code>Julia Client: New Terminal</code> and execute the <code>Julia Client: Connect External Process</code> command in Juno:</p><p><img src="../../assets/remote1.png" alt/></p><p>In the terminal you&#39;ll need to <code>ssh</code> into the remote machine with port forwarding. This can be done with the following command</p><pre><code class="language-none">ssh -R &lt;RemotePort&gt;:localhost:&lt;JunoPort&gt; you@yourserver</code></pre><p>where <code>&lt;RemotePort&gt;</code> is a port you can choose freely and <code>&lt;JunoPort&gt;</code> is the port given by the <code>Connect External Process</code> command. The <code>&lt;JunoPort&gt;</code> can also be customized in the settings.</p><p>Note: If you are on Windows, you should use <code>127.0.0.1</code> instead of <code>localhost</code>.</p><p>For servers that listen on a non-standard <code>ssh</code> port you&#39;ll also need to add the correct <code>-p</code> flag; I&#39;d also recommend using an identity file with the <code>-i</code> option.</p><p><img src="../../assets/remote2.png" alt/></p><blockquote><p>On the remote machine:</p></blockquote><p>After you&#39;re successfully logged into the server you need to start Julia, potentially <code>pkg&gt; add Atom Juno</code>, and execute</p><pre><code class="language-none">using Atom; using Juno; Juno.connect(&lt;RemotePort&gt;)</code></pre><p>Note that <code>&lt;RemotePort&gt;</code> is the port you chose in the <code>ssh -R ...</code> command, not the <code>&lt;JunoPort&gt;</code> that appears in the popup.</p><p>You should get a message telling you that Juno successfully connected to an external process; after that basically all of Juno&#39;s features should work fine:</p><p><img src="../../assets/remote3.png" alt/></p><h4 id="Possible-use-cases"><a class="docs-heading-anchor" href="#Possible-use-cases">Possible use cases</a><a id="Possible-use-cases-1"></a><a class="docs-heading-anchor-permalink" href="#Possible-use-cases" title="Permalink"></a></h4><p>Besides having more control regarding how Julia is launched, this can be useful if you need more control regarding remote sessions. For example instead of using the <code>tmux</code> integration, you can manually use other applications like <code>screen</code>. For example, you could resume a <code>screen</code> session before launching Julia on the remote, and thus when you connect to it, you will be able to continue your work from Juno.</p><p>Another example would be needing to restart Julia without reestablishing the ssh connection.</p><h4 id="Connecting-to-a-Julia-session-in-a-local-Docker-container"><a class="docs-heading-anchor" href="#Connecting-to-a-Julia-session-in-a-local-Docker-container">Connecting to a Julia session in a local Docker container</a><a id="Connecting-to-a-Julia-session-in-a-local-Docker-container-1"></a><a class="docs-heading-anchor-permalink" href="#Connecting-to-a-Julia-session-in-a-local-Docker-container" title="Permalink"></a></h4><p>You can also use <a href="#Manual-port-forwarding">Manual port forwarding</a> described above for e.g. a local Docker container.</p><ol><li>Launch Atom/Juno on your local machine</li><li>Spin up your docker container with network_mode:host, i.e.<pre><code class="language-bash">docker run -it --network=host [container_name] julia</code></pre></li><li>In Atom/Juno, bring up <a href="../basic_usage/#The-Command-Palette">The Command Palette</a> and search for <code>Julia Client: Connect External Process</code></li><li>Juno will respond with a Julia command, e.g. <code>using Juno; Juno.connect([ATOM_PORT])</code>, where <code>ATOM_PORT</code> is the port Atom is listening on for the Julia session to connect.</li><li>In the Julia session, replace <code>ATOM_PORT</code> in the following command with the port specified by Atom &amp; enter the following command to connect your Julia session to Atom\n For Mac:<pre><code class="language-julia">using Juno; Juno.connect(&quot;host.docker.internal&quot;, [ATOM_PORT])</code></pre>For Linux (untested):<pre><code class="language-julia">using Juno; Juno.connect(&quot;docker0&quot;, [ATOM_PORT])</code></pre></li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../debugging/">« Debugging</a><a class="docs-footer-nextpage" href="../juno_frontend/">The Juno.jl Front-End »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 14 September 2020 18:48">Monday 14 September 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
