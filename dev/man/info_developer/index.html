<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Information for Package Developers · Juno Documentation</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../../"><img class="logo" src="../../assets/logo.svg" alt="Juno Documentation logo"/></a><h1>Juno Documentation</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../installation/">Installation Instructions</a></li><li><a class="toctext" href="../basic_usage/">Basic Usage</a></li><li><a class="toctext" href="../debugging/">Debugging</a></li><li><a class="toctext" href="../faq/">FAQ</a></li><li><a class="toctext" href="../juno_frontend/">The Juno.jl Front-End</a></li><li class="current"><a class="toctext" href>Information for Package Developers</a><ul class="internal"><li><a class="toctext" href="#Custom-Inline-Display-1">Custom Inline Display</a></li><li><a class="toctext" href="#Displaying-Plots-and-Graphics-1">Displaying Plots and Graphics</a></li></ul></li></ul></li><li><span class="toctext">Developer Documentation</span><ul><li><a class="toctext" href="../../devdocs/contributor_guide/">Contributor Guide</a></li><li><a class="toctext" href="../../devdocs/dev_install/">Developer Installation Instructions</a></li><li><a class="toctext" href="../../devdocs/package_info/">Juno Package Information</a></li><li><a class="toctext" href="../../devdocs/juno_ci/">Juno&#39;s CI</a></li><li><a class="toctext" href="../../devdocs/communication/">Communication</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href>Information for Package Developers</a></li></ul><a class="edit-page" href="https://github.com/JunoLab/JunoDocs.jl/blob/master/docs/src/man/info_developer.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Information for Package Developers</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Information-for-Package-Developers-1" href="#Information-for-Package-Developers-1">Information for Package Developers</a></h1><h2><a class="nav-anchor" id="Custom-Inline-Display-1" href="#Custom-Inline-Display-1">Custom Inline Display</a></h2><p>Juno&#39;s inline display system operates on three distinct levels:</p><ol><li>If you create a new type and don&#39;t define a <code>show</code> method for it, Juno will use a fallback that lazily shows all fields.</li><li>If you&#39;ve defined a <code>show</code> method for the <code>application/prs.juno.inline</code> MIME type then Juno will</li></ol><ul><li>display what is printed by that method or</li><li>display the above fallback for the object returned by the <code>show</code>  method.</li></ul><ol><li>If you&#39;ve defined a <code>show</code> method for the <code>text/plain</code> MIME type Juno will use that to create a simple Tree View.</li><li><a href="https://github.com/pfitzseb/TreeViews.jl">TreeViews.jl</a> allows customizing <em>everything</em> about how your type is displayed.</li></ol><p>The following will show how to use the TreeViews.jl API for pretty-printing in a few simple cases.</p><p>First, let&#39;s define some custom types we want to display:</p><pre><code class="language-julia">struct Foo
    field1
    field2
end

struct Bar
    a
    field1
end</code></pre><p>By default, Juno displays those like this:</p><p><img src="../../assets/inline_0.png" alt="custom rendering 1"/></p><p>This default rendering method will not be used if you define e.g.</p><pre><code class="language-julia">Base.show(io::IO, ::MIME&quot;text/plain&quot;, ::Foo) = print(io, &quot;Foo&quot;)</code></pre><p>for displaying this nicely in the REPL. If you also define a <code>Base.show(io::IO, ::MIME&quot;application/prs.juno.inline&quot;, ::Foo)</code> method, that will be used instead. As a special case, you can also <em>return</em> an object from that show method, and Juno will show that with its default display methods (which allows you to recover what is shown above):</p><pre><code class="language-julia">Base.show(io::IO, ::MIME&quot;application/prs.juno.inline&quot;, x::Foo) = x</code></pre><hr/><p>To switch to a TreeViews.jl display we can simply overload the following methods for our types:</p><pre><code class="language-julia">import TreeViews: hastreeview, numberofnodes, treelabel, treenode
hastreeview(::Foo) = true
hastreeview(::Bar) = true</code></pre><p>Since TreeViews.jl implements sensible defaults for custom types, this gives us</p><p><img src="../../assets/inline_1.png" alt="custom rendering 2"/></p><p>It is of course possible to customize this to your heart&#39;s content. For example, we might only want to display <code>Foo</code>s first field with</p><pre><code class="language-julia">numberofnodes(::Foo) = 1</code></pre><p>or change the <code>Foo</code> in the first line to something else:</p><pre><code class="language-julia">treelabel(io::IO, x::Foo, ::MIME&quot;text/plain&quot;) = print(io, &quot;I&#39;m a Foo.&quot;)</code></pre><p><img src="../../assets/inline_2.png" alt="custom rendering 3"/></p><p>Juno accepts a few different MIME types:</p><ul><li><code>text/plain</code>: Probably best compatibility.</li><li><code>text/html</code>: Allows much richer display options (e.g. LaTeX).</li><li><code>application/prs.juno.inline</code>: Same as <code>text/html</code>, but specific to Juno.</li></ul><p>Even <code>text/plain</code> allows for some (limited) control over styling (colors, decorations). In general, you can print the correct <a href="https://en.wikipedia.org/wiki/ANSI_escape_code#SGR">SGR codes</a> and everything will work, but I&#39;d recommend using <a href="https://github.com/KristofferC/Crayons.jl">Crayons.jl</a> or a similar library instead:</p><pre><code class="language-julia"># plain SGR
treelabel(io::IO, x::Foo, ::MIME&quot;text/plain&quot;) =
  print(io, &quot;\x1b[32mHello\x1b[0m there&quot;)

using Crayons
treelabel(io::IO, x::Foo, i::Int, ::MIME&quot;text/plain&quot;) =
  print(io, crayon&quot;(250,20,105) bold&quot;(&quot;General&quot;), &quot; Kenobi&quot;)</code></pre><p><img src="../../assets/inline_3.png" alt="custom rendering 4"/></p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>Those styles also apply to display in the REPL, provided for example by the as-of-yet unregistered <a href="https://github.com/pfitzseb/REPLTreeViews.jl">REPLTreeViews.jl</a> package:</p><p><img src="../../assets/repltreeviews.png" alt="repl tree views"/></p></div></div><p>Using <code>text/html</code> allows for greater customization by using inline CSS</p><pre><code class="language-julia">treelabel(io::IO, x::Foo, i::Int, ::MIME&quot;text/html&quot;) =
  print(io, &quot;&lt;span&gt;&lt;span style=\&quot;color:aqua; font-size:0.7em\&quot;&gt;General&lt;/span&gt; Kenobi&lt;/span&gt;&quot;)</code></pre><p><img src="../../assets/inline_4.png" alt="custom rendering 5"/></p><p>The <code>application/prs.juno.inline</code> MIME type allows you to make use of the styling Atom uses:</p><pre><code class="language-julia">treelabel(io::IO, x::Foo, ::MIME&quot;application/prs.juno.inline&quot;) =
  print(io, &quot;&lt;span class=\&quot;syntax--support syntax--type syntax--julia\&quot;&gt;Junoooooooo!&lt;/span&gt;&quot;)</code></pre><p><img src="../../assets/inline_5.png" alt="custom rendering 6"/></p><p>It&#39;s also possible to e.g. print no label for <code>Foo</code>s first field and handle everything in with <code>treenode</code>:</p><pre><code class="language-julia">treelabel(io::IO, x::Foo, i::Int, ::MIME&quot;application/prs.juno.inline&quot;) = print(io, &quot;&quot;)
using Markdown
treenode(x::Foo, i::Int) = MD(&quot;&quot;&quot;
    ## Markdown

    with ``\\LaTeX``\n
    and `code = 2+sqrt(4)`
    &quot;&quot;&quot;)</code></pre><p><img src="../../assets/inline_6.png" alt="custom rendering 7"/></p><p>To hide the <code>treenode</code> display, simply return <code>missing</code>:</p><pre><code class="language-julia">treenode(x::Foo, i::Int) = missing
treelabel(io::IO, x::Foo, i::Int, ::MIME&quot;application/prs.juno.inline&quot;) = print(io, &quot;...&quot;)</code></pre><p><img src="../../assets/inline_7.png" alt="custom rendering 8"/></p><p>Nothing at all will be shown if <code>treelabel</code> doesn&#39;t print anything <em>and</em> <code>treenode</code> returns <code>missing</code>.</p><h2><a class="nav-anchor" id="Displaying-Plots-and-Graphics-1" href="#Displaying-Plots-and-Graphics-1">Displaying Plots and Graphics</a></h2><p>Plots can be displayed by providing a <code>show</code> method for one of the following MIME types (ordered by priority):</p><ol><li><code>application/prs.juno.plotpane+html</code> - rendered in a <a href="https://electronjs.org/docs/api/webview-tag"><code>webview</code></a></li><li><code>image/svg+xml</code> - rendered in a <a href="https://electronjs.org/docs/api/webview-tag"><code>webview</code></a></li><li><code>image/png</code></li><li><code>image/jpeg</code></li><li><code>image/tiff</code></li><li><code>image/bmp</code></li><li><code>image/gif</code></li></ol><p>The first two of those MIME types are rendered in a <code>webview</code> to a) prevent XSS and b) make sure not to crash Atom for big or complex graphics. For the others we provide some basic pan and zoom utilities.</p><p>So if you want to e.g. display an <code>svg</code> you can do the following:</p><pre><code class="language-julia">struct Baz
    data
end

Base.show(io::IO, ::MIME&quot;image/svg+xml&quot;, b::Baz) = print(io, b.data)
Baz(open(f -&gt; read(f, String), &quot;emu.svg&quot;))</code></pre><p><img src="../../assets/plotpane_svg.png" alt="plot pane svg"/></p><p><code>application/prs.juno.plotpane+html</code> is HTML, but also indicates that you want your type to be displayed in Juno&#39;s Plot Pane.</p><pre><code class="language-julia">struct Blah
    data
end

function Base.show(io::IO, ::MIME&quot;application/prs.juno.plotpane+html&quot;, b::Blah)
    colors = get(io, :juno_colors, nothing)
    size = get(io, :juno_plotsize, [100, 100])

    html = &quot;&quot;&quot;
    &lt;div style=&quot;
        background-color: #eee;
        color: #222;
        width: $(size[1]-40)px;
        height: $(size[2]-40)px;
        position: absolute;
        top: 0;
        left: 0;
        padding: 20px;
        margin: 0;
        &quot;&gt;
        &lt;span&gt;$(b.data)&lt;/span&gt;
        &lt;br/&gt;
        &lt;input/&gt;
    &lt;/div&gt;
    &quot;&quot;&quot;

    print(io, html)
end

Blah(&quot;Input stuff here:&quot;)</code></pre><p><img src="../../assets/plotpane_smart.png" alt="plot pane html"/></p><footer><hr/><a class="previous" href="../juno_frontend/"><span class="direction">Previous</span><span class="title">The Juno.jl Front-End</span></a><a class="next" href="../../devdocs/contributor_guide/"><span class="direction">Next</span><span class="title">Contributor Guide</span></a></footer></article></body></html>
