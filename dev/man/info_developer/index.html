<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Information for Package Developers · Juno Documentation</title><link rel="canonical" href="http://docs.junolab.org/stable/man/info_developer/index.html"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Juno Documentation logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Juno Documentation logo"/></a><div class="docs-package-name"><span class="docs-autofit">Juno Documentation</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../installation/">Installation Instructions</a></li><li><a class="tocitem" href="../basic_usage/">Basic Usage</a></li><li><a class="tocitem" href="../debugging/">Debugging</a></li><li><a class="tocitem" href="../remote/">Connecting to a Julia session on a remote machine</a></li><li><a class="tocitem" href="../juno_frontend/">The Juno.jl Front-End</a></li><li class="is-active"><a class="tocitem" href>Information for Package Developers</a><ul class="internal"><li><a class="tocitem" href="#Custom-Inline-Display-1"><span>Custom Inline Display</span></a></li><li><a class="tocitem" href="#Displaying-Plots-and-Graphics-1"><span>Displaying Plots and Graphics</span></a></li></ul></li><li><a class="tocitem" href="../update/">Update Instructions</a></li><li><a class="tocitem" href="../faq/">FAQ</a></li></ul></li><li><span class="tocitem">Developer Documentation</span><ul><li><a class="tocitem" href="../../devdocs/contributor_guide/">Contributor Guide</a></li><li><a class="tocitem" href="../../devdocs/dev_install/">Developer Installation Instructions</a></li><li><a class="tocitem" href="../../devdocs/ecosystem/">Ecosystem</a></li><li><a class="tocitem" href="../../devdocs/test_suites/">Test Suites</a></li><li><a class="tocitem" href="../../devdocs/communication/">Communication</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Information for Package Developers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Information for Package Developers</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JunoLab/JunoDocs.jl/blob/master/docs/src/man/info_developer.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Information-for-Package-Developers-1"><a class="docs-heading-anchor" href="#Information-for-Package-Developers-1">Information for Package Developers</a><a class="docs-heading-anchor-permalink" href="#Information-for-Package-Developers-1" title="Permalink"></a></h1><h2 id="Custom-Inline-Display-1"><a class="docs-heading-anchor" href="#Custom-Inline-Display-1">Custom Inline Display</a><a class="docs-heading-anchor-permalink" href="#Custom-Inline-Display-1" title="Permalink"></a></h2><p>Juno&#39;s inline display system operates on three distinct levels:</p><ol><li>If you create a new type and don&#39;t define a <code>show</code> method for it, Juno will use a fallback that lazily shows all fields.</li><li>If you&#39;ve defined a <code>show</code> method for the <code>application/prs.juno.inline</code> MIME type then Juno will</li></ol><ul><li>display what is printed by that method or</li><li>display the above fallback for the object returned by the <code>show</code>  method.</li></ul><ol><li>If you&#39;ve defined a <code>show</code> method for the <code>text/plain</code> MIME type Juno will use that to create a simple Tree View.</li><li><a href="https://github.com/pfitzseb/TreeViews.jl">TreeViews.jl</a> allows customizing <em>everything</em> about how your type is displayed.</li></ol><p>The following will show how to use the TreeViews.jl API for pretty-printing in a few simple cases.</p><p>First, let&#39;s define some custom types we want to display:</p><pre><code class="language-julia">struct Foo
    field1
    field2
end

struct Bar
    a
    field1
end</code></pre><p>By default, Juno displays those like this:</p><p><img src="../../assets/inline_0.png" alt="custom rendering 1"/></p><p>This default rendering method will not be used if you define e.g.</p><pre><code class="language-julia">Base.show(io::IO, ::MIME&quot;text/plain&quot;, ::Foo) = print(io, &quot;Foo&quot;)</code></pre><p>for displaying this nicely in the REPL. If you also define a <code>Base.show(io::IO, ::MIME&quot;application/prs.juno.inline&quot;, ::Foo)</code> method, that will be used instead. As a special case, you can also <em>return</em> an object from that show method, and Juno will show that with its default display methods (which allows you to recover what is shown above):</p><pre><code class="language-julia">Base.show(io::IO, ::MIME&quot;application/prs.juno.inline&quot;, x::Foo) = x</code></pre><hr/><p>To switch to a TreeViews.jl display we can simply overload the following methods for our types:</p><pre><code class="language-julia">import TreeViews: hastreeview, numberofnodes, treelabel, treenode
hastreeview(::Foo) = true
hastreeview(::Bar) = true</code></pre><p>Since TreeViews.jl implements sensible defaults for custom types, this gives us</p><p><img src="../../assets/inline_1.png" alt="custom rendering 2"/></p><p>It is of course possible to customize this to your heart&#39;s content. For example, we might only want to display <code>Foo</code>s first field with</p><pre><code class="language-julia">numberofnodes(::Foo) = 1</code></pre><p>or change the <code>Foo</code> in the first line to something else:</p><pre><code class="language-julia">treelabel(io::IO, x::Foo, ::MIME&quot;text/plain&quot;) = print(io, &quot;I&#39;m a Foo.&quot;)</code></pre><p><img src="../../assets/inline_2.png" alt="custom rendering 3"/></p><p>Juno accepts a few different MIME types:</p><ul><li><code>text/plain</code>: Probably best compatibility.</li><li><code>text/html</code>: Allows much richer display options (e.g. LaTeX).</li><li><code>application/prs.juno.inline</code>: Same as <code>text/html</code>, but specific to Juno.</li></ul><p>Even <code>text/plain</code> allows for some (limited) control over styling (colors, decorations). In general, you can print the correct <a href="https://en.wikipedia.org/wiki/ANSI_escape_code#SGR">SGR codes</a> and everything will work, but I&#39;d recommend using <a href="https://github.com/KristofferC/Crayons.jl">Crayons.jl</a> or a similar library instead:</p><pre><code class="language-julia"># plain SGR
treelabel(io::IO, x::Foo, ::MIME&quot;text/plain&quot;) =
  print(io, &quot;\x1b[32mHello\x1b[0m there&quot;)

using Crayons
treelabel(io::IO, x::Foo, i::Int, ::MIME&quot;text/plain&quot;) =
  print(io, crayon&quot;(250,20,105) bold&quot;(&quot;General&quot;), &quot; Kenobi&quot;)</code></pre><p><img src="../../assets/inline_3.png" alt="custom rendering 4"/></p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Those styles also apply to display in the REPL, provided for example by the as-of-yet unregistered <a href="https://github.com/pfitzseb/REPLTreeViews.jl">REPLTreeViews.jl</a> package:</p><p><img src="../../assets/repltreeviews.png" alt="repl tree views"/></p></div></div><p>Using <code>text/html</code> allows for greater customization by using inline CSS</p><pre><code class="language-julia">treelabel(io::IO, x::Foo, i::Int, ::MIME&quot;text/html&quot;) =
  print(io, &quot;&lt;span&gt;&lt;span style=\&quot;color:aqua; font-size:0.7em\&quot;&gt;General&lt;/span&gt; Kenobi&lt;/span&gt;&quot;)</code></pre><p><img src="../../assets/inline_4.png" alt="custom rendering 5"/></p><p>The <code>application/prs.juno.inline</code> MIME type allows you to make use of the styling Atom uses:</p><pre><code class="language-julia">treelabel(io::IO, x::Foo, ::MIME&quot;application/prs.juno.inline&quot;) =
  print(io, &quot;&lt;span class=\&quot;syntax--support syntax--type syntax--julia\&quot;&gt;Junoooooooo!&lt;/span&gt;&quot;)</code></pre><p><img src="../../assets/inline_5.png" alt="custom rendering 6"/></p><p>It&#39;s also possible to e.g. print no label for <code>Foo</code>s first field and handle everything in with <code>treenode</code>:</p><pre><code class="language-julia">treelabel(io::IO, x::Foo, i::Int, ::MIME&quot;application/prs.juno.inline&quot;) = print(io, &quot;&quot;)
using Markdown
treenode(x::Foo, i::Int) = MD(&quot;&quot;&quot;
    ## Markdown

    with ``\\LaTeX``\n
    and `code = 2+sqrt(4)`
    &quot;&quot;&quot;)</code></pre><p><img src="../../assets/inline_6.png" alt="custom rendering 7"/></p><p>To hide the <code>treenode</code> display, simply return <code>missing</code>:</p><pre><code class="language-julia">treenode(x::Foo, i::Int) = missing
treelabel(io::IO, x::Foo, i::Int, ::MIME&quot;application/prs.juno.inline&quot;) = print(io, &quot;...&quot;)</code></pre><p><img src="../../assets/inline_7.png" alt="custom rendering 8"/></p><p>Nothing at all will be shown if <code>treelabel</code> doesn&#39;t print anything <em>and</em> <code>treenode</code> returns <code>missing</code>.</p><h2 id="Displaying-Plots-and-Graphics-1"><a class="docs-heading-anchor" href="#Displaying-Plots-and-Graphics-1">Displaying Plots and Graphics</a><a class="docs-heading-anchor-permalink" href="#Displaying-Plots-and-Graphics-1" title="Permalink"></a></h2><p>Plots can be displayed by providing a <code>show</code> method for one of the following MIME types (ordered by priority):</p><ol><li><code>application/prs.juno.plotpane+html</code> - rendered in a <a href="https://electronjs.org/docs/api/webview-tag"><code>webview</code></a></li><li><code>image/svg+xml</code> - rendered in a <a href="https://electronjs.org/docs/api/webview-tag"><code>webview</code></a></li><li><code>image/png</code></li><li><code>image/jpeg</code></li><li><code>image/tiff</code></li><li><code>image/bmp</code></li><li><code>image/gif</code></li></ol><p>The first two of those MIME types are rendered in a <code>webview</code> to a) prevent XSS and b) make sure not to crash Atom for big or complex graphics. For the others we provide some basic pan and zoom utilities.</p><p>So if you want to e.g. display an <code>svg</code> you can do the following:</p><pre><code class="language-julia">struct Baz
    data
end

Base.show(io::IO, ::MIME&quot;image/svg+xml&quot;, b::Baz) = print(io, b.data)
Baz(open(f -&gt; read(f, String), &quot;emu.svg&quot;))</code></pre><p><img src="../../assets/plotpane_svg.png" alt="plot pane svg"/></p><p><code>application/prs.juno.plotpane+html</code> is HTML, but also indicates that you want your type to be displayed in Juno&#39;s Plot Pane.</p><pre><code class="language-julia">struct Blah
    data
end

function Base.show(io::IO, ::MIME&quot;application/prs.juno.plotpane+html&quot;, b::Blah)
    colors = get(io, :juno_colors, nothing)
    size = get(io, :juno_plotsize, [100, 100])

    html = &quot;&quot;&quot;
    &lt;div style=&quot;
        background-color: #eee;
        color: #222;
        width: $(size[1]-40)px;
        height: $(size[2]-40)px;
        position: absolute;
        top: 0;
        left: 0;
        padding: 20px;
        margin: 0;
        &quot;&gt;
        &lt;span&gt;$(b.data)&lt;/span&gt;
        &lt;br/&gt;
        &lt;input/&gt;
    &lt;/div&gt;
    &quot;&quot;&quot;

    print(io, html)
end

Blah(&quot;Input stuff here:&quot;)</code></pre><p><img src="../../assets/plotpane_smart.png" alt="plot pane html"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../juno_frontend/">« The Juno.jl Front-End</a><a class="docs-footer-nextpage" href="../update/">Update Instructions »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 28 February 2020 21:15">Friday 28 February 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
